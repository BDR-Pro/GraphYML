FROM python:3.9-slim

WORKDIR /app

# Copy requirements first to leverage Docker cache
COPY requirements.embedding.txt .
RUN pip install --no-cache-dir -r requirements.embedding.txt

# Copy the embedding service
COPY src/embedding_service.py .

# Environment variables
ENV MODEL_NAME="all-MiniLM-L6-v2"
ENV PORT=8000

# Expose the port the service runs on
EXPOSE 8000

# Command to run the service
CMD ["python", "embedding_service.py"]

